function m_slider(){const e=document.querySelector(".m_slider"),t=e.querySelector(".m_slider_wrapper"),n=e.querySelectorAll(".m_thumbnail").length+1,s=e.querySelector(".m_slider_paging_list"),l=[e.getElementsByClassName("m_slider_item")[0].cloneNode(!0),e.getElementsByClassName("m_slider_item")[n-2].cloneNode(!0)],a={x:e.offsetWidth,y:t.scrollHeight};let o=0;if(2===n)return void e.classList.add("single");t.append(l[0]),t.prepend(l[1]),[...e.querySelectorAll(".m_thumbnail")].forEach(e=>{if(0===o||o===n)o++;else{const t=e.cloneNode(!0);t.dataset.index=o,o++,s.appendChild(t)}});const i=s.getElementsByClassName("m_thumbnail");let r,c=1,d=null,u=null,m=null,h=null,v=!1;function f(e,s,l,o){const i=void 0===o?void 0===l?1===s?0===c?0:a.x*(c-1):c===n?n:a.x*(c+1):a.x*l:o,r=Math.max(.1,Math.min(Math.abs(i-e)/2e3,.8)),d=e=>-.5*(Math.cos(Math.PI*e)-1);let u=performance.now();v=!0,function l(){const a=(performance.now()-u)/(1e3*r),o=d(a);1>a?(window.requestAnimationFrame(l),t.style.transform=`translate3d(-${i+(e-i)*o}px, 0, 0)`):(1===s?c===n&&(c=1):0===c&&(c=n-1),t.style.transform=`translate3d(-${e}px, 0, 0)`,v=!1)}()}function g(t,s,l){[...e.querySelectorAll(".highlight")].forEach(e=>{e.classList.remove("highlight")}),f(a.x*c,t,s,l),i[0===c?n-2:c===n?0:c-1].classList.add("highlight")}function x(){clearInterval(r),r=setInterval(()=>{void 0===i[c]&&(c=0),document.getElementById("header").classList.contains("reveal")||(++c,g(1))},5e3)}function L(e){v||(x(),++c,g(1,void 0,e))}function E(e){v||(x(),--c,g(0,void 0,e))}function p(e){d=`${e.touches?e.touches[0].clientX:e.clientX}`,u=`${e.touches?e.touches[0].clientY:e.clientY}`,m=null,h=null,clearInterval(r)}function _(n){null!==d&&null!==u&&d>=20&&d<=window.innerWidth-20&&(m=`${n.touches?n.touches[0].clientX:n.clientX}`,h=`${n.touches?n.touches[0].clientY:n.clientY}`,t.style.transform=`translate3d(-${a.x*c+Math.round(d-m)}px, 0, 0)`),(h>=a.y-100||h<=150||m<=100||m>=windowWidth-100||Math.abs(u-h)>50)&&(y(),e.removeEventListener("touchmove",_),e.removeEventListener("mousemove",_))}function y(){const t=m&&d-m,n=h&&u-h,s=Math.abs(t),l=()=>{f(a.x*c,1,void 0,a.x*c),x()};v||(e.classList.remove("grabbing"),s>Math.abs(n)&&s>=50?t>=0?(L(a.x*c+Math.round(t)),d=null,u=null,m=null,currenTY=null):(E(a.x*c+Math.round(t)),d=null,u=null,m=null,currenTY=null):l())}a.x=e.offsetWidth,t.style.transform=`translate3d(-${a.x}px, 0, 0)`,i[0].classList.add("highlight"),document.documentElement.classList.contains("touchable")?(e.addEventListener("touchstart",t=>{t.target.matches(".text_box")&&!v&&(p(t),e.addEventListener("touchmove",_))},{passive:!0}),e.addEventListener("touchend",t=>{t.target.matches(".text_box")&&!v&&(y(),e.removeEventListener("touchmove",_))},{passive:!0})):(e.addEventListener("mousedown",t=>{const n=t.target;!n.matches("a")&&n.matches(".text_box")&&!v&&(p(t),e.classList.add("grabbing"),e.addEventListener("mousemove",_))},{passive:!0}),e.addEventListener("mouseup",t=>{const n=t.target;!n.matches("a")&&n.matches(".text_box")&&!v&&(y(),e.removeEventListener("mousemove",_))},{passive:!0})),[...s.querySelectorAll(".m_thumbnail")].forEach(e=>{e.addEventListener("click",()=>{const t=c;v||(e.classList.add("highlight"),g(t>(c=+e.dataset.index)?0:1,t),x())})}),[...e.querySelectorAll(".side_btn")].forEach(e=>{e.classList.contains("m_slider_prev")?e.addEventListener("click",()=>{E()}):e.addEventListener("click",()=>{L()})}),window.addEventListener("focus",()=>{x()}),window.addEventListener("blur",()=>{clearInterval(r)}),window.addEventListener("resize",()=>{a.x=e.offsetWidth,t.style.transform=`translate3d(-${c*a.x}px, 0, 0)`,a.y=t.scrollHeight},{passive:!0}),x()}function helloUser(){const e=JSON.parse(localStorage.getItem("TNT-userData"));null!==e&&""!==e.name&&toast(`안녕하세요 ${e.name}님!`)}helloUser(),m_slider();
